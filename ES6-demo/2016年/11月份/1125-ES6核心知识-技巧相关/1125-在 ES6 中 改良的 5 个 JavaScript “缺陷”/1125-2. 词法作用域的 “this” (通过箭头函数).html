<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

在 ES5 中，“this” 会随着函数调用位置和调用方式改变，这种变化无常给很多开发者带来过痛苦的经历。

ES6 通过箭头函数带来的词法作用域的 “this” 消除了这个问题。

词法作用域的 “this” 特性让变量的 “this” 总是指向词法声明时的那个对象。

“this” 问题和 ES5 中的两个解决方法:

在下图(见 6-big.jpg )中，我们希望打印一个用户的名字和薪水。假设我们从服务器异步获取薪水数据。注意到当服务器返回结果时，函数里的 “this” 是 “window” 而不是 “person”。

见 6-big.jpg -> ES5 中的 “this” 问题和两种解决方式

<!-- ----------------------------------------------------------------------------------- -->

在 ES6 中的解决方法：

在 ES6 中简单使用箭头函数就可以自动获得词法作用域的 “this”

代码查看 7-big.jpg

<!-- ------------------------------------------------------------------------------- -->

下图演示了 Babel 如何将箭头函数转为普通的 ES5 函数：

具体代码可以查看 8-big.jpg

<!-- ------------------------------------------------------------------------------------ -->


</body>
</html>
