<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

<!-- ----------------------------------------------------------------------------------------------------------- -->

    <script>
// ----------------------------------------------------------------------------------------------------

        // 引入 http 模块
        const http = require('http')

        class Server {
            constructor() {}

            start() {
                const serve = http.createServer((req, res) => {

                    res.setHeader('Content-Type', 'text/plain;charset=UTF-8')

                    res.end('我的第一个服务器')
                })
                serve.listen(3000, '127.0.0.1', () => {
                    console.log('我在 http://127.0.0.1:3000 启动了')
                })
            }
        }

        // 启动服务器
        app = new Server()
        app.start()

// ----------------------------------------------------------------------------------------------------

        //  两行代码版

          const http = require('http')
          http.createServer((req, res) => {

             res.setHeader('Content-Type', 'text/plain;charset=UTF-8')

             res.end('我的第一个服务器')

          }).listen(3000)

          // 我们启动这个服务器
          node server.js

// ----------------------------------------------------------------------------------------------------

    </script>
    
<!-- ----------------------------------------------------------------------------------------------------------- -->

    打开 http://127.0.0.1:3000 心怀期待，一打开一看，fxxk！中文乱码了！机智的你马上想到是编码格式的问题。

    node本身不支持 GBK格式，但是它是支持 UTF-8 的。当然这个编码的问题我们先发一边，我们现在要讨论下，http.createServer 接收的回调函数的两个参数 request、response，请求实体和响应实体。我们在调试接口的过程中，观察浏览器控制台 network 下经会看到一个请求的 公共头，响应头，和请求头。请求头或者叫请求报文首部浏览器给我们做了大量的工作，它包含请求一个接口的重要信息，比如 formData，query 等

    而我们的回调函数已经拿到response这个对象了，就意味着我们能直接改造响应头，返回我们想要的样子。我们z在res.end()之前加上这么一个响应字段。

    res.setHeader('Content-Type', 'text/plain;charset=UTF-8')

<!-- ----------------------------------------------------------------------------------------------------------- -->

    http是TCP/IP协议族的一部分，处于其应用层，是我们最为常用的传输协议；TCP三次握手。

    http最要的部分是请求报文（request），响应报文（response），

    报文首部也就是响应头包含着大量的信息，并有其独有的左右。

    MIME和Content-type(内容类型)。

    番外：node启动服务器；axios，post请求注意事项，修改请求头Content-Type，qs模块格式化提交数据。

<!-- ----------------------------------------------------------------------------------------------------------- -->

</body>

</html>
