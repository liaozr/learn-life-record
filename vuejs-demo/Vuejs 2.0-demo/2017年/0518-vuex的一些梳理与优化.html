<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

  <!-- ------------------------------------------------------------------------------ -->

  Vuex梳理

  之前代码每个组件都单独ajax请求自己的数据，导致Vuex的module特别多特别乱，而且后端api接口太多太碎，不好维护。

  最后开发的童鞋自己都在群里抱怨，找个action或者mutation都不知道在哪个文件内，需要搜代码。。

  <!-- ------------------------------------------------------------------------------ -->

  首先做约定，明确什么时候使用Vuex：

  页面view相关的数据才使用Vuex来管理，

  页面功能性ajax（例如签到、兑换）不要使用vuex；

  「首次后端渲染」和「非首次跳转」的view数据都通过commit mutation来修改state，最终映射到DOM表现上；

   功能性ajax则在组件内自己发请求实现，保持组件内聚；

  <!-- ------------------------------------------------------------------------------ -->

  P.S：这就是「贫血组件」和「充血组件」的区别，

  本身组件内的状态和逻辑都放在全局store管理，会增加store复杂度，降低效率（代码性能和开发效率）

  然后，收敛vuex module

  收敛是根据业务页面做的，前文提到：

  页面主要包括：首页、任务+列表、商品+列表、个人信息和记录以及其他类（说明和规则等）

  其中需要数据的有：首页、任务（详情、列表）、商品（详情、列表）和个人中心四个。

  <!-- ------------------------------------------------------------------------------ -->

</body>

</html>
