<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

<!-- -------------------------------------------------------------------------------------------------------- -->

    <!-- main.js 里面 -->
    <!-- main.js 里面 -->

    <script>

        // beforeEach 表示的是路由全局钩子
        router.beforeEach(({meta,path}, from, next) => {

            // 判断组件是否要登录
            var isLogin = meta.isLogin;
            // isLogin 表示的是 这个路由组件要不要登录

            var loginState = Boolean(store.state.globalState.loginState)

            //true用户已登录， false用户未登录
            if (isLogin && !loginState && path !== '/login') {
                alert('请先登录');
                return next({
                    path: '/login',
                    query: {
                        redirect: path
                    } // 将跳转的路由path作为参数，登录成功后跳转到该路由
                })
            }
            else {
                next()
            }

        })

    </script>

<!-- -------------------------------------------------------------------------------------------------------- -->


</body>

</html>
