<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<!-- ------------------------------------------------------------------------------------- -->

<!-- 1. 声明变量 -->

使用 var 声明的变量会自动被添加到最接近的环境中。 

在函数内部， 最接近的环境就是函数的局部
环境；在 with 语句中，最接近的环境是函数环境。


如果初始化变量时没有使用 var 声明，该变量会自动被添加到全局环境。
如果初始化变量时没有使用 var 声明，该变量会自动被添加到全局环境。

如下所示：

<script>
function add(num1, num2) {
var sum = num1 + num2;
return sum;
}
var result = add(10, 20); //30
alert(sum); //由于 sum 不是有效的变量，因此会导致错误
</script>

以上代码中的函数 add() 定义了一个名为 sum 的局部变量，该变量包含加法操作的结果。虽然结
果值从函数中返回了，但变量 sum 在函数外部是访问不到的。

如果省略这个例子中的 var 关键字，那么当 add() 执行完毕后， sum 也将可以访问到：

<!-- ----------------------------------------------------------------------------------- -->

<script>

function add(num1, num2) {
sum = num1 + num2;
return sum;
}
var result = add(10, 20); //30
alert(sum); //30

</script>

<!-- ---------------------------------------------------------------------------------------- -->

<!-- 2、查询标识符 -->

如果存在一个局部的变量的定义，则搜索会自动停止，不再进入另一个变量对
象。

换句话说，如果局部环境中存在着同名标识符，就不会使用位于父环境中的标识符

如下面的例子
<script>
var color = "blue";
function getColor(){
var color = "red";
return color;
}
alert(getColor()); //"red"
</script>

修改后的代码在 getColor() 函数中声明了一个名为 color 的局部变量。
调用函数时，该变量
就会被声明。而当函数中的第二行代码执行时，意味着必须找到并返回变量 color 的值。

搜索过程首先从局部环境中开始，而且在这里发现了一个名为 color 的变量，其值为 "red" 。

因为变量已经找到了，所以搜索即行停止， return 语句就使用这个局部变量，并为函数会返回 "red" 。也就是说，
任何位于局部变量 color 的声明之后的代码，如果不使用 window.color 都无法访问全局 color变量。

 <!-- -------------------------------------------------------------------- -->
</body>
</html>