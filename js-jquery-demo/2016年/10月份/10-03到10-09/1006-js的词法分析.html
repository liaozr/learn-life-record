<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>

<!-- 

js解析器在执行语句前会将函数声明和变量定义进行"预编译"，而这个"预编译"，
并非一个页面一个页面地"预编译"，而是一段一段地预编译，所谓的段就是一个 <script></script> 块

javaScript代码自上而下执行，但是在js代码执行前，
会首先进行词法分析

所以事实上，js运行要分为  词法分析 和 执行 两个阶段。

运行要分为  词法分析 和 执行 两个阶段。

运行要分为  词法分析 和 执行 两个阶段。

-->

<!-- 词法分析 -->

<!-- 词法分析主要分为3步：  -->

第1步：分析形参 

第2步：分析变量声明 

第3步：分析函数声明 

如果存在函数嵌套，则从外往内进行词法分析

<!-- ------------------------------------------------------------------------ -->

<!-- 执行： -->

1、在函数执行的一瞬间，产生一个空的 Active Object（活动对象），下面简称AO

2、AO对象初始化
2.1 函数声明的形参，形成AO的属性，默认值是undefined
2.2 接收实参，给刚刚形成AO的属性的形参赋值 

3、var声明、函数声明均被提升到函数体顶部(若var声明、函数声明同名，则函数声明将覆盖变量声明)，注意，var声明只提前了声明部分，而函数声明提前了整个函数定义。

4、分析var声明变量！如 var age;（变量的值是在运行时期决定）
4.1 如果AO上没有age属性，则给AO添加age属性，默认值是undefined 
4.2 如果AO上已经存在age属性，则忽视，不做任何操作。 

5、分析函数声明！如 function foo(){}
5.1 如果AO上没有foo属性，则为AO添加foo属性 
5.2 如果AO上有foo属性，则会直接覆盖，把函数赋给AO.foo属性（因为：若var声明、函数声明同名，则函数声明将覆盖变量声明） 
依据此时AO的值，自上而下执行代码

<!-- 函数声明会覆盖变量声明 -->
<!-- 函数声明会覆盖变量声明 -->
<!-- 函数声明会覆盖变量声明 -->

<!-- --------------------------------------------------------------------------------- -->

<script>
function a(b){ 
   alert(b); 
   function b(){ 
       alert(b); 
   } 
   b(); 
} 
a(1); 
</script>

<!-- 上面的代码等同于下面的代码写法 -->

<script>
function a(b){ 
   function b(){ 
       alert(b); 
   } 
   alert(b); 
   b(); 
} 
a(1); 
</script>

<!-- 

过程：

形成活动对象AO = {}
分析形参，–> AO = {b:undefined}; 
分析传参，–> AO = {b:1}
分析变量声明var，没有
分析函数声明，AO.b = function(){alert(b);},执行覆盖操作

 -->

<!-- 执行结果： -->
<script>

alert(b);//弹出提示‘function b(){ alert(b); }’

b(); // 执行function b(){ alert(b); }，在函数b的作用域内部找不到b,根据作用域链原理往外层寻找，找到b就是函数自己，弹出‘function b(){ alert(b); }’
</script>

</body>
</html>