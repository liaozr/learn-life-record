<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

<!-- ----------------------------------------------------------------------------- -->

  display:none 的 元素只加载不渲染

  把DOM树和样式规则树匹配构建渲染树时，会把可渲染元素上的所有属性（如display:none属性和background-image属性）结合一起产出到渲染树。

  当解析渲染树时会加载<img>标签元素上的图片，发现元素上有background-image属性时会加载背景图片。

  当绘制时发现元素上有display:none属性，则不计算该元素位置，也不会绘制该元素。

<!-- ----------------------------------------------------------------------------- -->

  <style>

    .img-yellow {
        background-image: url(../image/yellow.png);
    }

  </style>

  <div style="display:none">

      <img src="../image/red.png">
      <div class="img-yellow"></div>

  </div>

<!-- ----------------------------------------------------------------------------- -->

  图片资源请求如下：

  设置了display:none属性元素的子元素，样式表中的背景图片不会渲染出来，也不会加载；

  而<img>标签的图片不会渲染出来，但会加载。

  原理

  正如上面所说的，构建渲染树时，只会把可渲染元素产出到渲染树，这就意味有不可渲染元素，当匹配DOM树和样式规则树时，若发现一个元素的属性上有display:none，浏览器会认为该元素的子元素是不可渲染的，因此不会把该元素的子元素产出到渲染树上。

  当解析渲染树时渲染树上没有设置了display:none属性元素的子元素，因此不会加载该元素中子元素的背景图片。

  当绘制时也因为渲染树上没有设置了display:none属性元素的子元素，因此该元素中子元素的背景图片不会渲染出来。

  <!-- ----------------------------------------------------------------------------- -->


</body>

</html>
