<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

  反向代理：

  所谓反向代理服务器，它是代理服务器中的一种。客户端直接发送请求给代理服务器，

  然后代理服务器会根据客户端的请求，从真实的资源服务器中获取资源返回给客户端。

  所以反向代理就隐藏了真实的服务器。利用这种特性，我们可以通过将其他域名的资源映射成自己的域名来规避开跨域问题。

<!-- ------------------------------------------------------------------------------- -->

Nginx代理配置参考

首先找到Nginx配置文件：
Windows下路径就是你安装Nginx目录下找，比如我的放在C盘根目录，那就是：c:\nginx\conf\nginx.conf

Mac系统配置文件路径在: /usr/local/etc/nginx/nginx.conf, Finder下通过Shift+Command+G，输入/usr/local/etc/nginx/进入该目录。
<!-- ------------------------------------------------------------------------------- -->

在Nginx配置文件中添加如下配置：

server {
    listen  80;
    server_name 127.0.0.1;

    location / {
        proxy_pass  http://127.0.0.1:3000;
    }

    location ~ /api/ {
        proxy_pass  http://172.30.1.123:8081;
    }
}

上面的配置的可以理解为：
监听80端口（Nginx默认启动了80端口），将http://127.0.0.1的所有请求服务转发到127.0.0.1端口为3000；

将http://127.0.0.1/api/或者http://127.0.0.1/api/getList请求转发到http://172.30.1.123:8081

<!-- ------------------------------------------------------------------------------- -->

完成

经过上面的配置我们可以直接通过http://127.0.0.1访问我们的WEB应用（如果采用IP访问）

，而相关的API请求也会根据我们的Nginx配置进行相应的请求，浏览器端看到的/api/getList请求的是127.0.0.1端口为80的端口，

但是实际上这个请求已经被我们的Nginx转发指向http://172.30.1.123:8081/api/getList

<!-- ------------------------------------------------------------------------------- -->

友情提示：

Nginx每一条配置语句后面都必须要加分号; 否则会报配置错误，自己还一脸懵逼。

<!-- ------------------------------------------------------------------------------- -->

关于location

上面的配置你可能会对localtion后面的配置感到疑惑，关于localtion后面的常用的需求有：

localtion / {
    # 所有请求都匹配以下规则
    # 因为所有的地址都以 / 开头，所以这条规则将匹配到所有请求
    # xxx 你的配置写在这里
}

location = / {
    # 精确匹配 / ，后面带任何字符串的地址都不符合
}

localtion /api {
    # 匹配任何 /api 开头的URL，包括 /api 后面任意的, 比如 /api/getList
    # 匹配符合以后，还要继续往下搜索
    # 只有后面的正则表达式没有匹配到时，这一条才会采用这一条
}

localtion ~ /api/abc {
    # 匹配任何 /api/abc 开头的URL，包括 /api/abc 后面任意的, 比如 /api/abc/getList
    # 匹配符合以后，还要继续往下搜索
    # 只有后面的正则表达式没有匹配到时，这一条才会采用这一条
}


以/ 通用匹配, 如果没有其它匹配,任何请求都会匹配到
=开头表示精确匹配
^~ 开头表示uri以某个常规字符串开头，不是正则匹配
~ 开头表示区分大小写的正则匹配;
~* 开头表示不区分大小写的正则匹配

<!-- ------------------------------------------------------------------------------- -->

</body>
</html>
