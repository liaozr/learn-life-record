<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
  
<!-- ---------------------------------------------------------------------------- -->

2.1.1 使用内容分发网络（Content Delivery Network，CDN）

通过在现有的Internet中增加一层新的网络架构，将网站的内容发布到最接近用户的 cache服务器内，通过DNS负载均衡的技术，判断用户来源就近访问cache服务器取得所需的内容。深圳用户访问遥远的美国服务器，当然不理想了。把静态内容分布到CDN可以减少用户响应时间20%或更多。

<!-- ---------------------------------------------------------------------------- -->

2.1.2 静态资源缓存，移动端离线缓存

如果可以减少服务端的负担，在应用离线时可使用资源或加载资源更快，岂不乐哉？
缓存利用可包括：添加 Expires 头，配置 ETag，使 Ajax 可缓存等。其实，恰当的缓存设置可以大大的减少 HTTP请求，也可以节省带宽 。

<!-- ---------------------------------------------------------------------------- -->

2.2.1 减少请求数

可通过以下方式减少请求数：

小图片合并雪碧图；
JS、CSS文件选择性合并；
避免重复的资源请求。

<!-- ---------------------------------------------------------------------------- -->

2.2.2 减少文件大小（减少请求带宽）

压缩CSS、JS、图片；
尽可能控制DOM节点数；
精简css、 JavaScript，移除注释、空格、重复css和脚本。

<!-- ---------------------------------------------------------------------------- -->

使用外链CSS和JS，CSS放头，JS放尾，防止阻塞以减少对并发下载的影响，尽早刷新文档的输出。

<!-- ---------------------------------------------------------------------------- -->

3.1 常见攻击：

XSS (Cross Site Script) ，跨站脚本攻击，往Web页面里插入恶意html代码。特点是攻击者的代码必须能获取用户浏览器端的执行权限，要杜绝此类攻击出现可以在入口和出口进行严格的过滤。
三种类型：
（1） 反射型XSS：一次性；将包含注入脚本的恶意链接发送给受害者。
（2） 持久型XSS：用户输入的数据“存储”在服务器端，比如一条包含XSS代码的留言。
（3） DOM XSS：使用一些eval等有输出的语句意味着多了一份被XSS的风险。

应对策略：

当恶意代码值被作为某一标签的内容显示：在不需要html输入的地方对html 标签及一些特殊字符( ” < > & 等等 )做过滤，将其转化为不被浏览器解释执行的字符。

当恶意代码被作为某一标签的属性显示，通过用 “将属性截断来开辟新的属性或恶意方法：属性本身存在的 单引号和双引号都需要进行转码；对用户输入的html 标签及标签属性做白名单过滤，也可以对一些存在漏洞的标签和属性进行专门过滤。
CSRF(Cross Site Request Forgery)，跨站点伪造请求，通过伪造连接请求在用户不知情的情况下，让用户以自己的身份来完成攻击者需要达到的一些目的。

cookie劫持，通过获取页面的权限，在页面中写一个简单的到恶意站点的请求，并获取用户的cookie登录某些站点。

对于crsf 和cookie 劫持的策略：

通过 referer、token 或者 验证码 来检测用户提交。
尽量不要在页面的链接中暴露用户隐私信息。
对于用户修改删除等操作最好都使用post 操作 。
避免全站通用的cookie，严格设置cookie的域。

<!-- ---------------------------------------------------------------------------- -->

3.3浏览器安全

3.3.1 同源策略

首先了解一下同源策略：

源指的是有相同的HOST、相同的协议、相同的端口。
同源策略以源为单位，把资源天然分隔，保护了用户的信息安全。
绕过同源策略让javascript访问其他源的资源的方法，如：JSONP、CORS、flash等。

同源策略不是绝对安全的，面对很多攻击是无能为力的，比如XSS，因为此时攻击者就在同源之内。
不建议使用JSONP，因为JSONP通常在脚本中写一个回调函数，然后把回调函数的名字写在请求的URL中，因此如果请求数据的服务器被黑了，那么黑客就能在返回的数据中植入恶意代码，从而窃取用户的隐私信息。

跨域资源共享CORS允许资源提供方在响应头中加入一个特殊的标记，使你能通过XHR来获取、解析并验证数据。这样就能避免恶意代码在你的应用中执行。在响应头中加入的标记如下：

1
Access-Control-Allow-Origin: allowed origins

如果对Access–Control-Allow-Origin设置为*其实是比较危险的，如果没有携带会话认证意味着信息被公开在全网，建议设置具体的域名，而且跨域的时候记得带上session id；严格审查请求信息，比如请求参数，还有http头信息，因为 http头可以伪造。

<!-- ---------------------------------------------------------------------------- -->



</body>

</html>
