webpackJsonp([5,35],{1057:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t){var e=t.state.route,n=e.params.id,i=P(t),s=i.actionType.FETCH;return t.dispatch(s,n)}function o(t){var e=P(t),n=e.actionType.RESET;t.dispatch(n)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),a=i(r),l=n(103),c=i(l),u=n(110),d=(i(u),n(46)),f=n(6),h=n(39),p=n(277),m=n(54),v=n(269),y=n(670),g=n(633),C=n(30),_=i(C),b=n(268),w=i(b),k=n(630),x=i(k),E=n(725),T=i(E),F=n(720),O=i(F),$=n(723),L=i($),M=n(635),R=i(M),P=function(t){return t.state.view.column};e.default={data:function(){return{following:!1,page:1,pageSize:20,recommendEntries:[],newCommentContent:"",isMobile:!1,isWeixin:!1,isCollectPopupVisible:!1}},components:{Avatar:w.default,UserPopover:x.default,RelatedEntry:T.default,CommentForm:O.default,CommentList:L.default,CollectPopup:R.default},computed:(0,a.default)({},(0,d.mapGetters)({user:f.USER}),{state:function(){return P(this.$store)},column:function(){return this.state.column},entry:function(){return this.state.entry},author:function(){return this.state.author},followed:function(){return this.author.followed},like:function(){return this.entry.liked},authorAvatar:function(){return(0,v.getCroppedImageUrl)(this.author.avatar_large,80,80)},date:function(){return(0,h.formatDate)(this.entry.createdAt,"YYYY 年 MM 月 DD 日")},editLink:function(){return this.entry&&"markdown"===this.column.type?"/editor/md/"+this.entry.id:this.entry&&"wysiwyg"===this.column.type?"/editor/write/"+this.entry.id:void 0},entryScreenshot:function(){var t=this.entry&&this.entry.screenshot;return t&&!this.column.isTitleImageFullscreen?"url("+t+")":null},entryFullscreenScreenshot:function(){return this.entry&&this.entry.screenshot},entryTitle:function(){return this.entry&&this.entry.title},entryLikeCount:function(){return this.entry&&this.entry.collectionCount},entryView:function(){return this.column.entryView},entryViewContent:function(){return this.entryView&&this.entryView.content},entryOriginalUrl:function(){return this.entry&&this.entry.originalUrl},entryTags:function(){return this.entry?this.entry.tagsTitleArray:[]},likeIcon:function(){return"https://gold-cdn.xitu.io/images/post/"+(this.like?"collection_press":"collection")+".svg"},postShareWeiboUrl:function(){if(this.entry){var t=this.entryTitle+" - "+this.author.username+" - 掘金专栏",e="https://juejin.im/post/"+this.$route.params.id,n=this.entry.screenshot?this.entry.screenshot:"https://gold-cdn.xitu.io/images/weibo-share.png";return"http://service.weibo.com/share/share.php?title="+encodeURIComponent(t)+"&url="+encodeURIComponent(e)+"&pic="+n}},postSharePocketUrl:function(){return"http://getpocket.com/edit?url="+encodeURIComponent(this.entryOriginalUrl)},postShareEvernoteUrl:function(){return"http://www.addtoany.com/add_to/evernote?linkurl="+encodeURIComponent(this.entryOriginalUrl)+"&linkname="+encodeURIComponent(this.entryTitle)},entryQr:function(){return(0,c.default)("https://juejin.im/post/"+this.$route.params.id,{type:6,size:6,level:"Q"})}}),metaInfo:function(){var t=(0,y.getEntrySEOMeta)(this.entry,this.entryViewContent),e=t.title,n=t.keywords,i=t.description;return{title:e||"专栏",meta:[{vmid:"keywords",name:"keywords",content:n},{vmid:"description",name:"description",content:i}]}},methods:{toggleDropdown:function(t){(0,m.toggleDropdown)(t)},fetch:function(){return s(this.$store)},reset:function(){return o(this.$store)},toggleLike:function(){this.user||_.default.emit(_.default.eventType.REQUEST_REGISTER),this.$store.dispatch(f.TOGGLE_LIKE_ENTRY,this.entry)},toggleFollow:function(){return this.$store.dispatch(f.TOGGLE_FOLLOW_USER,this.author)},loadMoreLikes:function(){this.$store.dispatch(this.state.likerList.actionType.FETCH_MORE)},focusComment:function(){this.$refs.commentForm.focus()},onShouldFetchMoreComment:function(){this.$store.dispatch(this.state.commentList.actionType.FETCH_MORE)},onSubmitedComment:function(){this.refreshCommentList()},onRepliedComment:function(){this.refreshCommentList()},refreshCommentList:function(){var t=this.state.commentList.actionType.FORCE_FETCH,e=this.entry.id;this.$store.dispatch(t,{entryId:e})},collect:function(){var t=this;this.$ensureAuthorized().then(function(){return t.isCollectPopupVisible=!0}).catch(function(){})},zoomImages:function(){var t=[].slice.call(this.$el.querySelector(".post-content").querySelectorAll("img"));window.mediumZoom(t)},handleShowFull:function(){this.user||this.isMobile||(document.querySelector(".post-content-container").style.maxHeight=document.querySelector(".post-content").clientHeight/2+"px")},handleFullscreenImages:function(){var t=document.querySelector(".post-content");if(t){var e=[].slice.call(t.querySelectorAll(".full-screen")),n=document.body.clientWidth;e.forEach(function(t){n>=668?(t.style.width=n+"px",t.style.marginLeft=-(n-668)/2+"px",t.style.maxWidth=n+"px"):(t.style.width=n-32+"px",t.style.marginLeft="auto",t.style.maxWidth=n-32+"px")});var i=t.querySelectorAll("img");Array.prototype.forEach.call(i,function(t){!t.classList.contains("full-screen")&&t.clientWidth>668&&(n<1e3&&n>668?(t.style.width=n+"px",t.style.marginLeft=-(n-668)/2+"px",t.style.maxWidth=n+"px"):n<=668&&(t.style.width=n-32+"px",t.style.marginLeft="auto",t.style.maxWidth=n-32+"px"))})}},recordEntryView:function(){(0,g.recordEntryView)(this.entry)}},preFetch:function(t){return s(t)},mounted:function(){var t=this;this.entry.createdAt=this.entry.createdAt,"#comment"===this.$route.hash&&this.$refs.commentForm.focus(),this.isMobile=document.body.clientWidth<960,this.isWeixin=(0,p.isInWechatApp)(),this.fetch().then(function(){t.$nextTick(function(){t.zoomImages(),t.handleShowFull(),t.handleFullscreenImages()}),t.recordEntryView()}).catch(function(e){t.$error(e)})},beforeDestroy:function(){this.reset()}}},596:function(t,e,n){n(937),n(938);var i=n(16)(n(1057),n(861),"data-v-13f76525",null);t.exports=i.exports},624:function(t,e,n){n(627);var i=n(16)(n(628),n(626),"data-v-009ea7bb",null);t.exports=i.exports},625:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(){return new d}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=i(o),a=n(13),l=i(a),c=n(271),u=i(c);e.createLock=s;var d=function(){function t(){(0,l.default)(this,t),this.busy=!1}return(0,u.default)(t,[{key:"do",value:function(t){var e=this;return this.busy?r.default.resolve():(this.busy=!0,r.default.resolve(t()).then(function(t){return e.busy=!1,t}).catch(function(t){return e.busy=!1,r.default.reject(t)}))}}]),t}()},626:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thumb",style:t.thumbStyle},[n("img",{staticClass:"hidden",attrs:{src:t.thumbUrl,alt:t.alt}})])},staticRenderFns:[]}},627:function(t,e){},628:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(24),o=i(s),r=n(267),a=n(269);e.default={name:"Thumb",props:["url","default","width","height","shrink","format","size","alt","blank"],serverCacheKey:function(t){return(0,o.default)(t).map(function(e){return t[e]}).join(":")},computed:{thumbUrl:function(){var t=this.url||(this.blank?"":this.default||r.defaultThumbUrl);return this.width&&this.height?this.shrink?(0,a.getShrinkedImageUrl)(t,this.width,this.height,{format:this.format}):(0,a.getCroppedImageUrl)(t,this.width,this.height,{format:this.format}):t},thumbStyle:function(){return{backgroundImage:"url("+this.thumbUrl+")",backgroundSize:this.size||"cover"}}}}},629:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return o(t).then(r).then(a.bind(null,e))}function o(t){return new c.default(function(e,n){var i=new FileReader;i.onload=function(t){i.abort(),e(t.target.result)},i.onerror=function(t){return n(t)},i.readAsArrayBuffer(t)})}function r(t){return new Uint8Array(t).subarray(0,4).reduce(function(t,e){return t+e.toString(16)},"")}function a(t,e){for(var n=0;n<u.length;n++)if(u[n].regx.test(e))return t.indexOf(u[n].name)!==-1;return!1}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),c=i(l);e.isValidImageFileType=s;var u=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}]},630:function(t,e,n){n(640);var i=n(16)(n(647),n(638),"data-v-311d2efa",null);t.exports=i.exports},631:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function o(t){return a(t,"web")}function r(t){return a(t,"public")}function a(t,e){var n=d.getCurrentUser();return(new c.default.Class.View).set("user",n?(0,f.createAVObject)("User",n.id):null).set("entry",(0,f.createAVObject)("Entry",t)).set("source",e).save()}Object.defineProperty(e,"__esModule",{value:!0}),e.recordEntryView=o,e.recordEntryPublicView=r;var l=n(11),c=s(l),u=n(5),d=i(u),f=n(8)},633:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function o(t){return t&&t.id?u.recordEntryView(t.id).catch(function(t){console.error(t)}):l.default.resolve()}function r(t){return t&&t.id?u.recordEntryPublicView(t.id).catch(function(t){console.error(t)}):l.default.resolve()}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),l=s(a);e.recordEntryView=o,e.recordEntryPublicView=r;var c=n(634),u=i(c)},634:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return a.recordEntryView(t)}function o(t){return a.recordEntryPublicView(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.recordEntryView=s,e.recordEntryPublicView=o;var r=n(631),a=i(r)},635:function(t,e,n){n(641);var i=n(16)(n(646),n(639),"data-v-e4647de6",null);t.exports=i.exports},636:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function o(t){return y.updateCollection(t)}function r(t){return a(t).then(function(){return(0,_.uploadAVFile)(t)}).then(function(t){return t.url})}function a(t){return l(t).then(function(){return c(t)})}function l(t){return m.default.resolve().then(function(){if(t.size>x)return m.default.reject(new Error("文件过大"))})}function c(t){return(0,b.isValidImageFileType)(t,k).then(function(t){if(!t)return m.default.reject(new Error("不支持此文件格式"))})}function u(t){return C.deleteCollection(t)}function d(t){return C.createCollection(t)}function f(t){var e=t.title,n=t.imageUrl||w.defaultWeiboImageUrl,i="https://juejin.im/collection/"+t.id,s=h(t.author),o=t.own?"我在掘金上创建了一个收藏集「"+e+"」，推荐给你。来自@稀土掘金":"我在掘金上发现了一个收藏集「"+e+"」，作者是@"+s+" ，推荐给你。来自@稀土掘金",r=["http://service.weibo.com/share/share.php","?title="+encodeURIComponent(o),"&url="+encodeURIComponent(i),"&pic="+n].join("");window.open(r,"_blank")}function h(t){return((t.authData||{}).weibo||{}).nickname||t.username}Object.defineProperty(e,"__esModule",{value:!0});var p=n(2),m=s(p);e.updateCollection=o,e.uploadBackgroundImageFile=r,e.deleteCollection=u,e.createCollection=d,e.shareToWeibo=f;var v=n(101),y=i(v),g=n(68),C=i(g),_=n(270),b=n(629),w=n(267),k=["jpg","png"],x=1048576},637:function(t,e,n){t.exports=n.p+"static/img/collection.77d703d.svg"},638:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-popover-box",on:{mouseenter:function(e){t.showPopover(e)},mouseleave:t.hidePopover}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"popover",staticClass:"user-popover",style:t.popoverStyle},[n("div",{staticClass:"info-row"},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}})],1),n("div",{staticClass:"user-info"},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.user),blank:!0}},[t._v(t._s(t.user.username))]),n("div",{staticClass:"position",attrs:{title:t.position}},[t._v(t._s(t.position))])],1)],1),n("div",{staticClass:"meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.postedEntriesCount||0))]),n("div",{staticClass:"title"},[t._v("分享")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followersCount||0))]),n("div",{staticClass:"title"},[t._v("关注者")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.totalCollectionsCount||0))]),n("div",{staticClass:"title"},[t._v("获得喜欢")])])]),t.self?t._e():n("button",{staticClass:"follow-btn",class:{followed:t.followed},attrs:{disabled:!t.canToggleFollow},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}},[t._v(t._s(t.followed?"已关注":"关注"))])])]),t._t("default")],2)},staticRenderFns:[]}},639:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collect-popup-box",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{staticClass:"mask",on:{click:t.close}}),i("div",{ref:"popup",staticClass:"collect-popup"},[i("div",{staticClass:"title"},[t._v("添加到收藏集")]),i("ul",{ref:"list",staticClass:"collection-list"},[t._l(t.list,function(e){return i("li",{staticClass:"item",on:{click:function(n){t.onCollectionClick(e)}}},[i("div",{staticClass:"item-block"},[i("thumb",{staticClass:"thumb",attrs:{url:e.imageUrl,width:50,height:50}}),i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"entry-count"},[t._v(t._s(e.entryCount))])],1),i("div",{staticClass:"item-block"},[i("button",{staticClass:"collect-icon",class:{collected:e.isIn},style:{display:e.isIn?"block":""}})])])}),t.list.length?t._e():i("div",{staticClass:"empty"},[i("img",{staticClass:"empty-icon",attrs:{src:n(637)}}),i("div",{staticClass:"empty-title"},[t._v("点击下方文字新建收藏集")])])],2),i("div",{staticClass:"action-box"},[t.isNewFormVisible?i("form",{staticClass:"new-form",on:{submit:function(e){e.preventDefault(),t.createCollection(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newCollectionTitle,expression:"newCollectionTitle"}],ref:"titleInput",staticClass:"title-input",attrs:{disabled:t.creating,maxlength:"20"},domProps:{value:t.newCollectionTitle},on:{input:function(e){e.target.composing||(t.newCollectionTitle=e.target.value)}}}),i("button",{staticClass:"submit-btn",attrs:{disabled:!t.canCreate||t.creating},on:{click:function(e){e.preventDefault(),t.createCollection(e)}}},[t._v("添加")])]):i("button",{staticClass:"new-btn",on:{click:t.showNewForm}},[t._v("新建收藏集")])])])])},staticRenderFns:[]}},640:function(t,e){},641:function(t,e){},642:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=d.getCurrentUser();return e?new c.default.Query(c.default.Class.Follow).equalTo("followeeUser",(0,f.createAVObject)("User",t)).equalTo("followerUser",(0,f.createAVObject)("User",e.id)).count().then(function(t){return!!t}):a.default.resolve(!1)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=s(r);e.hasFollowedUser=o;var l=n(11),c=s(l),u=n(5),d=i(u),f=n(8)},643:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return r.hasFollowedUser(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasFollowedUser=s;var o=n(645),r=i(o)},644:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t){return t?t.length>20?a.default.reject("标题要在20个字符以内"):a.default.resolve():a.default.reject("标题不能为空")}function o(t){return t?t.length>100?a.default.reject("描述要在100个字符以内"):a.default.resolve():a.default.reject("描述不能为空")}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=i(r);e.titleValidator=s,e.descriptionValidator=o},645:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return r.hasFollowedUser(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasFollowedUser=s;var o=n(642),r=i(o)},646:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(30),o=(i(s),n(54)),r=n(6),a=n(68),l=(n(644),n(636)),c=n(625),u=n(102),d=n(624),f=i(d);e.default={components:{Thumb:f.default},props:["entry"],data:function(){return{list:[],page:1,loading:!1,filled:!1,creating:!1,isNewFormVisible:!1,newCollectionTitle:"",collectLock:(0,c.createLock)()}},computed:{canCreate:function(){return!!this.newCollectionTitle}},methods:{close:function(){this.$emit("close")},showNewForm:function(){var t=this;this.isNewFormVisible=!0,this.$nextTick(function(){t.$refs.titleInput.focus()})},init:function(){this.fetchList(),this.initEventListener()},initEventListener:function(){var t=this;(0,o.onScrollBottomOffsetChange)(this.$refs.list,function(e){e<50&&t.fetchList()})},fetchList:function(){var t=this;this.loading||this.filled||(this.loading=!0,(0,a.getCurrentUserCollectionListForAddingEntry)(this.entry.id,this.page).then(function(e){t.list=(0,u.unique)(t.list.concat(e),function(t){return t.id}),t.page++,t.loading=!1,t.filled=0===e.length}).catch(function(e){t.loading=!1,t.$error(e)}))},createCollection:function(){var t=this;if(!this.creating){this.creating=!0;var e=this.newCollectionTitle.trim();if(e)return(0,l.createCollection)({title:e}).then(function(e){return t.toggleCollect(e).then(function(){t.list.unshift(e),t.$refs.list.scrollTop=0,t.isNewFormVisible=!1,t.newCollectionTitle="",t.creating=!1})}).catch(function(e){t.$error(e),t.creating=!1})}},toggleCollect:function(t){return this.$store.dispatch(r.TOGGLE_COLLECT_ENTRY,{entry:this.entry,collection:t})},onCollectionClick:function(t){var e=this;this.collectLock.do(function(){return e.toggleCollect(t).then(function(){return setTimeout(function(){e.close()},300)})})}},mounted:function(){this.init()}}},647:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),o=n(643),r=n(625),a=n(268),l=i(a);e.default={components:{Avatar:l.default},props:["user"],data:function(){return{followLock:(0,r.createLock)(),canToggleFollow:!1,followed:!1,visible:!1,top:0,left:0}},computed:{popoverStyle:function(){return{top:this.top+"px",left:this.left+"px"}},position:function(){return this.$userPosition(this.user)||this.user.self_description||"暂无简介"},self:function(){return this.user.self}},watch:{visible:function(){var t=this;!this.visible||this.self||this.canToggleFollow||(0,o.hasFollowedUser)(this.user.id).then(function(e){t.followed=e,t.user.followed=e,t.canToggleFollow=!0})}},methods:{toggleFollow:function(){var t=this;this.followLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(s.TOGGLE_FOLLOW_USER,t.user)}).then(function(){t.followed=t.user.followed}).catch(function(){})})},showPopover:function(t){var e=this;clearTimeout(this.hideToken),this.showToken=setTimeout(function(){e.visible=!0;var n=t.target.getBoundingClientRect();e.$nextTick(function(){var t=e.$refs.popover,i=t.offsetWidth,s=t.offsetHeight,o=n.left-i/2+20,r=n.top-s-10;r<60&&(o=n.left-10-i,r=n.top-s/2+10),o=Math.max(0,o),e.left=o,e.top=r})},300)},hidePopover:function(){var t=this;clearTimeout(this.showToken),this.hideToken=setTimeout(function(){t.popoverTimeout=null,t.visible=!1},300)}}}},667:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t){return r.uploadAVFile(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.uploadAVFile=s;var o=n(270),r=i(o)},670:function(t,e,n){"use strict";function i(t,e){t=t||{},e=e||t.parsedContent;var n=t.title||"",i=s(e)||t.content;return{title:n,keywords:o(t.tagsTitleArray),description:r(i)}}function s(t){return(t||"").replace(/<.*?>/g,"")}function o(t){return t=t||[],t.concat(a.KEYWORDS).join(",").replace(/[\r\n]/g," ")}function r(t){return t=(t||"").trim(),t=t?t.slice(0,140)+" | "+a.DESCRIPTION:a.DESCRIPTION,t.replace(/[\r\n]/g," ")}Object.defineProperty(e,"__esModule",{value:!0}),e.getEntrySEOMeta=i,e.toKeywords=o,e.toDescription=r;var a=n(274)},720:function(t,e,n){n(757);var i=n(16)(n(765),n(742),"data-v-efcd2e56",null);t.exports=i.exports},721:function(t,e,n){n(749);var i=n(16)(n(766),n(734),"data-v-54e3f196",null);t.exports=i.exports},722:function(t,e,n){n(753);var i=n(16)(n(767),n(738),"data-v-7f6a837b",null);t.exports=i.exports},723:function(t,e,n){n(748);var i=n(16)(n(768),n(733),"data-v-51163f89",null);t.exports=i.exports},725:function(t,e,n){n(754);var i=n(16)(n(770),n(739),"data-v-9db545a6",null);t.exports=i.exports},733:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"list",staticClass:"comment-list"},t._l(t.list,function(e,i){return n("li",{key:i,staticClass:"item"},[n("comment",{attrs:{comment:e,entry:t.entry},on:{replied:t.onReplied}})],1)}))},staticRenderFns:[]}},734:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-uploader"},[n("input",{ref:"input",staticClass:"input",attrs:{type:"file"},on:{change:function(e){t.onFileSelected(e.target.files[0])}}}),t.url?n("div",{staticClass:"preview-box"},[n("img",{staticClass:"preview",attrs:{src:t.url}}),n("button",{staticClass:"clean-btn",attrs:{title:"移除图片"},on:{click:t.cleanFile}},[n("i",{staticClass:"ion-close-circled"})])]):n("button",{staticClass:"upload-btn",on:{click:t.showFileDialog}},[n("i",{staticClass:"icon ion-image"}),n("span",[t._v("上传图片")])])])},staticRenderFns:[]}},738:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("user-popover",{attrs:{user:t.comment.user}},[n("app-link",{attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user}})],1)],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))]),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.comment.reply?n("span",[t._v("回复"),n("router-link",{attrs:{to:t.$userRoute(t.comment.reply.user)}},[n("span",{staticClass:"username"},[t._v(t._s(t.comment.reply.user.username))])]),t._v("：")],1):t._e(),n("span",{directives:[{name:"parse-url",rawName:"v-parse-url"}],staticClass:"content-html"},[t._v(t._s(t.comment.content))])]),n("div",{staticClass:"footer"},[n("button",{staticClass:"like-btn",class:{liked:t.comment.liked},on:{click:t.toggleLike}},[n("i",{staticClass:"collection-arrow-ion ion-arrow-up-b"}),n("span",[t._v(t._s(t.displayedLikeCount))])]),n("button",{staticClass:"reply-btn",on:{click:t.showReplyForm}},[t._v("回复")]),n("span",{staticClass:"date"},[t._v(t._s(t.date))])]),t.isReplyFormVisible?n("form",{staticClass:"reply-form",class:{replying:t.replying}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],ref:"replyInput",staticClass:"reply-input",attrs:{placeholder:t.replyPlaceholder},domProps:{value:t.replyContent},on:{input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),n("div",{staticClass:"action-box"},[n("button",{staticClass:"cancel-btn",on:{click:function(e){e.preventDefault(),t.hideReplyForm(e)}}},[t._v("取消")]),n("button",{staticClass:"confirm-btn",on:{click:function(e){e.preventDefault(),t.reply(e)}}},[t._v("回复")])])]):t._e()])],1)},staticRenderFns:[]}},739:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry"},[n("a",{directives:[{name:"link",rawName:"v-link.blank",value:t.detailRoute,expression:"detailRoute",modifiers:{blank:!0}}],staticClass:"entry-link"},[n("thumb",{staticClass:"thumb",attrs:{url:this.entry.screenshot}}),n("div",{staticClass:"info"},[n("div",{staticClass:"row title-row"},[n("a",{directives:[{name:"link",rawName:"v-link.blank",value:t.detailRoute,expression:"detailRoute",modifiers:{blank:!0}}],staticClass:"title"},[t._v(t._s(t.entry.title))])]),n("div",{staticClass:"row meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"meta user"},[n("div",{staticClass:"username"},[t._v(t._s(t.entry.user.username))])]),t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon icon-likes iconfont icon-xlcollection"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon icon-comments iconfont icon-xlchatbox"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])])])],1)])},staticRenderFns:[]}},742:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-form"},[n("avatar",{staticClass:"avatar",attrs:{user:t.user}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"content-input",attrs:{placeholder:"说说你的看法"},domProps:{value:t.content},on:{focus:function(e){t.isActionBoxVisible=!0},blur:t.onContentInputBlur,keyup:t.quickSubmit,input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||t.vote,expression:"isActionBoxVisible || vote"}],staticClass:"action-box"},[n("image-uploader",{directives:[{name:"show",rawName:"v-show",value:t.vote,expression:"vote"}],ref:"imageUploader",staticClass:"image-uploader"}),n("div",{staticClass:"submit-box"},[n("span",{staticClass:"submit-text"},[t._v("Ctrl or ⌘ + Enter")]),n("button",{staticClass:"submit-btn",on:{click:t.submit}},[t._v("评论")])])],1),t.submitting?n("div",{staticClass:"submitting-mask"},[t._v("提交中...")]):t._e()],1)},staticRenderFns:[]}},748:function(t,e){},749:function(t,e){},753:function(t,e){},754:function(t,e){},757:function(t,e){},758:function(t,n,i){/*! hotkeys-js v2.0.1 |  (c) 2016  | https://github.com/jaywcjlove/hotkeys.git */
!function(e){t.exports=e()}(function(){function t(t){C=t||"all"}function n(){return C||"all"}function i(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function s(t){return"string"==typeof t&&(t=x(t)),b.indexOf(t)!==-1}function o(t){return b.slice(0)}function r(t){var e,i=t.keyCode||r.which||r.charCode,s=E["*"];if(b.indexOf(i)===-1&&b.push(i),93!==i&&224!==i||(i=91),i in k){k[i]=!0;for(var o in _)_[o]===i&&(m[o]=!0);if(!s)return}for(var r in k)k[r]=t[w[r]];if(m.filter.call(this,t)){if(e=n(),s)for(l=0;l<s.length;l++)s[l].scope===e&&a(t,s[l],e);if(i in E)for(var l=0;l<E[i].length;l++)a(t,E[i][l],e)}}function a(t,e,n){var i;if(e.scope===n||"all"===e.scope){i=e.mods.length>0;for(var s in k)(!k[s]&&e.mods.indexOf(+s)>-1||k[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(0!==e.mods.length||k[16]||k[18]||k[17]||k[91])&&!i&&"*"!==e.shortcut||e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function l(t,e){for(var i,s,o=h(t),r=[],a=0;a<o.length;a++){if(i=o[a].split("+"),i.length>1&&(r=f(i)),t=i[i.length-1],t=x(t),void 0===e&&(e=n()),!E[t])return;for(var l=0;l<E[t].length;l++)s=E[t][l],s.scope===e&&u(s.mods,r)&&(E[t][l]={})}}function c(t){var e,n,i;for(e in E)for(n=E[e],i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++}function u(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function d(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"===e||"SELECT"===e||"TEXTAREA"===e)}function f(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=_[e[n]];return e}function h(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""===e[e.length-1]&&(e[e.length-2]+=","),e}function p(t){var n=t.keyCode||e.which||e.charCode,i=b.indexOf(n);if(i>=0&&b.splice(i,1),93!==n&&224!==n||(n=91),n in k){k[n]=!1;for(var s in _)_[s]===n&&(m[s]=!1)}}function m(t,e,n){var i=h(t),s=[],o=0;for(void 0===n&&(n=e,e="all");o<i.length;o++)t=i[o].split("+"),s=[],t.length>1&&(s=f(t),t=[t[t.length-1]]),t=t[0],t="*"===t?"*":x(t),t in E||(E[t]=[]),E[t].push({shortcut:i[o],scope:e,method:n,key:i[o],mods:s})}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1});for(var v,y=navigator.userAgent.toLowerCase().indexOf("firefox")>0,g={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":y?173:189,"=":y?61:187,";":y?59:186,"'":222,"[":219,"]":221,"\\":220},C="all",_={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":y?224:91,command:y?224:91},b=[],w={16:"shiftKey",18:"altKey",17:"ctrlKey"},k={16:!1,18:!1,17:!1},x=function(t){return g[t]||t.toUpperCase().charCodeAt(0)},E={},T=1;T<20;T++)g["f"+T]=111+T;w[y?224:91]="metaKey",k[y?224:91]=!1,i(document,"keydown",function(t){r(t)}),i(document,"keyup",function(t){p(t)}),v={setScope:t,getScope:n,deleteScope:c,getPressedKeyCodes:o,isPressed:s,filter:d,unbind:l};for(var F in v)m[F]=v[F];var O=window.hotkeys;return m.noConflict=function(t){return t&&window.hotkeys===m&&(window.hotkeys=O),m},window.hotkeys=m,m})},759:function(t,e,n){var i,s,o;/*!
	Autosize 3.0.20
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,r){s=[e,t],i=r,o="function"==typeof i?i.apply(e,s):i,void 0!==o&&(t.exports=o)}(this,function(t,e){"use strict";function n(t){function e(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),l="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(l)&&(l=0),a()}function n(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function i(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function s(){var e=t.style.height,n=i(t),s=document.documentElement&&document.documentElement.scrollTop;t.style.height="auto";var o=t.scrollHeight+l;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=o+"px",c=t.clientWidth,n.forEach(function(t){t.node.scrollTop=t.scrollTop}),s&&(document.documentElement.scrollTop=s)}function a(){s();var e=Math.round(parseFloat(t.style.height)),i=window.getComputedStyle(t,null),o=Math.round(parseFloat(i.height));if(o!==e?"visible"!==i.overflowY&&(n("visible"),s(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))):"hidden"!==i.overflowY&&(n("hidden"),s(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))),u!==o){u=o;var a=r("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var l=null,c=t.clientWidth,u=null,d=function(){t.clientWidth!==c&&a()},f=function(e){window.removeEventListener("resize",d,!1),t.removeEventListener("input",a,!1),t.removeEventListener("keyup",a,!1),t.removeEventListener("autosize:destroy",f,!1),t.removeEventListener("autosize:update",a,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",f,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",a,!1),window.addEventListener("resize",d,!1),t.addEventListener("input",a,!1),t.addEventListener("autosize:update",a,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:f,update:a}),e()}}function i(t){var e=o.get(t);e&&e.destroy()}function s(t){var e=o.get(t);e&&e.update()}var o="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,i){t.indexOf(n)===-1&&(t.push(n),e.push(i))},delete:function(n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),e.splice(i,1))}}}(),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t,e)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=a})},765:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),o=i(s),r=n(6),a=n(32),l=n(759),c=i(l),u=n(268),d=i(u),f=n(721),h=i(f),p=null;a.isServer||(p=n(758)),e.default={components:{Avatar:d.default,ImageUploader:h.default},props:["user","entry","vote"],data:function(){return{content:"",isActionBoxVisible:!1,submitting:!1}},mounted:function(){(0,c.default)(this.$refs.input)},watch:{content:function(t){t&&!this.user&&this.$requestRegister()}},methods:{focus:function(){this.$refs.input.focus()},onContentInputBlur:function(){this.content||(this.isActionBoxVisible=!1)},submit:function(){var t=this,e=this.entry,n=this.content.trim();return this.user?n?(this.submitting=!0,void this.uploadImage().then(function(i){return t.$store.dispatch(r.SUBMIT_COMMENT,{entry:e,content:n,imageFileId:i})}).then(function(){t.$refs.imageUploader.cleanFile(),t.content="",t.submitting=!1,t.$emit("submited")}).catch(function(e){t.submitting=!1,t.$error(e)})):void this.$alert("评论不能为空"):void this.$requestRegister()},uploadImage:function(){return this.$refs.imageUploader.file?this.$refs.imageUploader.upload():o.default.resolve()},quickSubmit:function(t){(p.isPressed(91)&&p.isPressed("enter")||p.isPressed(93)&&p.isPressed("enter")||p.isPressed(17)&&p.isPressed("enter"))&&this.submit()}}}},766:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(629),s=n(667),o=["jpg","png"];e.default={data:function(){return{file:null,url:null}},methods:{showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.file=t,window.URL.revokeObjectURL(this.url),this.url=t?window.URL.createObjectURL(t):null},cleanFile:function(){this.changeFile(null)},onActionBoxClick:function(){this.url?this.cleanFile():this.showFileDialog()},onFileSelected:function(t){var e=this;if(this.$refs.input.value=null,t)return this.isWithVaildSize(t)?void(0,i.isValidImageFileType)(t,o).then(function(n){n?e.changeFile(t):e.$alert("不支持此格式的图片上传")}):void this.$alert("文件过大")},isWithVaildSize:function(t){return t.size<=1048576},upload:function(){return(0,s.uploadAVFile)(this.file).then(function(t){return t.id})}}}},767:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(39),o=n(104),r=n(6),a=n(268),l=i(a),c=n(630),u=i(c);e.default={components:{Avatar:l.default,UserPopover:u.default},props:["comment","entry"],data:function(){return{isReplyFormVisible:!1,replyContent:"",replying:!1}},computed:{date:function(){return(0,s.getRelativeDateString)(this.comment.createdAt)},displayedLikeCount:function(){return(0,o.getTruncatedNumberString)(this.comment.likesCount)},replyPlaceholder:function(){return"对 "+this.comment.user.username+" 的回复"}},methods:{toggleLike:function(){var t=this;this.$ensureAuthorized().then(function(){return t.$store.dispatch(r.TOGGLE_LIKE_COMMENT,t.comment)}).catch(function(){})},showReplyForm:function(){var t=this;this.$ensureAuthorized().then(function(){t.replyContent="",t.isReplyFormVisible=!0,t.$nextTick(function(){t.$refs.replyInput.focus()})}).catch(function(){})},hideReplyForm:function(){this.isReplyFormVisible=!1},reply:function(){var t=this,e=this.replyContent.trim();return e?(this.replying=!0,this.$store.dispatch(r.REPLY_COMMENT,{tarComment:this.comment,content:e}).then(function(){t.replying=!1,t.hideReplyForm(),t.$emit("replied")}).catch(function(e){t.replying=!1,t.$error(e)})):void this.$alert("回复不能为空")}},mounted:function(){this.comment.createdAt=this.comment.createdAt}}},768:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(30),o=i(s),r=n(54),a=n(722),l=i(a),c=o.default.eventType.ROOT_CONTAINER_SCROLL;e.default={components:{Comment:l.default},props:["list","entry"],methods:{fetchMoreIfConditionIsSatisfied:function(){(0,r.getBottomOffset)(this.$refs.list)>-200&&this.$emit("should-fetch-more")},onReplied:function(){this.$emit("replied")}},mounted:function(){var t=this;o.default.onVmLife(this,c,function(){t.fetchMoreIfConditionIsSatisfied()}),(0,r.onMouseWheel)(this.$refs.list,function(){t.fetchMoreIfConditionIsSatisfied()})}}},770:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(624),o=i(s);e.default={components:{Thumb:o.default},props:["entry"],computed:{detailRoute:function(){return"post"===this.entry.type?this.entry.originalUrl:"/entry/"+this.entry.id+"/detail"}}}},798:function(t,e,n){t.exports=n.p+"static/img/collect.4ab2670.svg"},799:function(t,e,n){t.exports=n.p+"static/img/collected.3452e88.svg"},800:function(t,e,n){t.exports=n.p+"static/img/comment.19fd3e9.svg"},801:function(t,e,n){t.exports=n.p+"static/img/share.79cb260.svg"},861:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view-container",{attrs:{size:"full"}},[i("div",{staticClass:"root-view-bg"}),i("div",{staticClass:"view column-view"},[i("div",{staticClass:"container entry-view"},[i("div",{staticClass:"post-placeholder"},[t.entry?t._e():i("img",{staticClass:"fade",attrs:{src:"https://gold-cdn.xitu.io/images/post-loading.png"}})]),i("app-link",{staticClass:"post-author clearfix",attrs:{to:t.$userRoute(t.author),blank:!0}},[i("avatar",{staticClass:"avatar",attrs:{user:t.author}}),i("div",{staticClass:"author-info float-left"},[i("div",{staticClass:"author-name text-pointer"},[t._v(t._s(t.author.username))]),i("div",{staticClass:"author-meta"},[t._v(t._s(t.date)),t.user&&t.user.id==t.author.id?i("a",{staticClass:"post-edit text-a",attrs:{href:t.editLink},on:{click:function(t){t.stopPropagation()}}},[t._v(" · 编辑")]):t._e()])])],1)],1),t.entryScreenshot?i("div",{staticClass:"post-hero",style:{"background-image":t.entryScreenshot}}):t._e(),t.column.isTitleImageFullscreen?i("img",{staticClass:"post-hero-full",attrs:{src:t.entryFullscreenScreenshot}}):t._e(),i("div",{staticClass:"container entry-view"},[i("h1",{staticClass:"post-title"},[t._v(t._s(t.entryTitle))]),i("div",{staticClass:"post-info-mobile"},[t.entry?i("div",{staticClass:"action create-at-action"},[t._v(t._s(t.date))]):t._e(),i("app-link",{staticClass:"action text-a",attrs:{to:t.$userRoute(t.author),blank:!0}},[t._v(t._s(t.author.username))])],1),i("div",{staticClass:"post-content-container",class:{hidden:!t.user}},[i("div",{staticClass:"entry-content post-content",domProps:{innerHTML:t._s(t.entryViewContent)}}),t.user?t._e():i("div",{staticClass:"show-full"}),t.user?t._e():i("div",{staticClass:"show-full-block"},[i("div",{staticClass:"show-full-btn",on:{click:function(e){t.$requestQuickLogin("一键登录展开全文")}}},[t._v("展开全文")])])]),t.entryTags?i("div",{staticClass:"post-tags tags cloud"},t._l(t.entryTags,function(e){return i("div",{staticClass:"tag"},[i("app-link",{staticClass:"tag-link",attrs:{to:t.$tagRoute(e),blank:!0}},[t._v(t._s(e))])],1)})):t._e(),i("div",{staticClass:"post-meta"},[i("div",{staticClass:"actions"},[i("div",{staticClass:"action",on:{click:t.toggleLike}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:t.likeIcon}}),t.entryLikeCount>0?i("span",{staticClass:"like-count",class:{true:!!t.like}},[t._v(t._s(t.entryLikeCount))]):t._e()])]),t.user&&!t.isWeixin?i("div",{staticClass:"actions secondary sparse"},[t.entry.collectStateError?t._e():i("div",{ref:"collectBtn",staticClass:"action collection",attrs:{title:"收藏"},on:{click:t.collect}},[t.entry.collected?t._e():i("img",{staticClass:"inline square inline-icon collect",attrs:{src:n(798)}}),t.entry.collected?i("img",{staticClass:"inline square inline-icon collect",attrs:{src:n(799)}}):t._e(),t.isCollectPopupVisible?i("collect-popup",{attrs:{entry:t.entry},on:{close:function(e){t.isCollectPopupVisible=!1}}}):t._e()],1),i("div",{staticClass:"action",attrs:{title:"评论"},on:{click:t.focusComment}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:n(800)}})]),i("div",{staticClass:"action dropdown share-dropdown",attrs:{title:"分享"},on:{click:function(e){t.toggleDropdown(e)}}},[i("img",{staticClass:"inline square inline-icon dropdown-active",attrs:{src:n(801)}}),i("ul",{staticClass:"dropdown-list",attrs:{title:""}},[i("div",{staticClass:"dropdown-hint"},[t._v("分享到...")]),i("li",[i("a",{staticClass:"share-link",attrs:{href:t.postShareWeiboUrl,target:"_blank"}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/weibo.svg"}}),i("span",[t._v("新浪微博")])])]),i("li",{staticClass:"dropdown-wechat-share share-link"},[i("a",{staticClass:"share-link"},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/weixin.svg"}}),i("span",[t._v("微信")]),i("div",{staticClass:"wechat-qr-box"},[i("div",{staticClass:"qr-box-title text-muted text-center"},[t._v("微信扫一扫")]),i("img",{staticClass:"entry-qr",attrs:{src:t.entryQr}})])])]),i("li",[i("a",{staticClass:"share-link",attrs:{href:t.postSharePocketUrl,target:"_blank"}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/pocket.svg"}}),i("span",[t._v("Pocket")])])]),i("li",[i("a",{staticClass:"share-link",attrs:{href:t.postShareEvernoteUrl,target:"_blank"}},[i("img",{staticClass:"inline square",attrs:{src:"https://gold-cdn.xitu.io/images/evernote.svg"}}),i("span",[t._v("Evernote")])])])])])]):t._e(),t.user||t.isWeixin?t._e():i("div",{staticClass:"actions secondary"},[i("div",{staticClass:"action text-gray"},[t._v("分享到")]),i("a",{staticClass:"action",attrs:{href:t.postShareWeiboUrl,target:"_blank"}},[i("img",{staticClass:"inline square inline-icon",attrs:{src:"https://gold-cdn.xitu.io/images/weibo.svg"}})]),i("div",{staticClass:"action dropdown share-dropdown",on:{click:t.toggleDropdown}},[i("img",{staticClass:"inline square inline-icon dropdown-active",attrs:{src:"https://gold-cdn.xitu.io/images/weixin.svg"}}),i("ul",{staticClass:"dropdown-list text-center"},[i("div",{staticClass:"qr-box-title text-muted"},[t._v("微信扫一扫")]),i("img",{staticClass:"entry-qr",attrs:{src:t.entryQr}})])])])]),t.isMobile?t._e():i("div",{staticClass:"post-like-users"},[i("ul",{staticClass:"users-list"},[t._l(t.state.likerList.list,function(e){return i("li",{staticClass:"users-list-item"},[i("app-link",{attrs:{to:t.$userRoute(e),blank:!0}},[i("user-popover",{attrs:{user:e}},[i("avatar",{staticClass:"avatar",attrs:{user:e}})],1)],1)],1)}),t.state.likerList.canNext?i("li",{staticClass:"users-list-item",on:{click:t.loadMoreLikes}},[i("div",{staticClass:"more-users"},[i("i",{staticClass:"ion-more"})])]):t._e()],2)])]),i("div",{staticClass:"container bottom-container"},[t.isWeixin?t._e():i("section",{staticClass:"post-author-box"},[i("app-link",{staticClass:"avatar author-avatar float-left text-pointer",style:{backgroundImage:"url("+t.authorAvatar+")"},attrs:{to:t.$userRoute(t.author),blank:!0}}),i("app-link",{staticClass:"author-info float-left text-pointer",attrs:{to:t.$userRoute(t.author),blank:!0}},[i("div",{staticClass:"author-name"},[t._v(t._s(t.author.username))]),i("div",{staticClass:"author-meta"},[i("span",[t._v(t._s(t.author.jobTitle))]),t.author.company&&t.author.jobTitle?i("span",[t._v(" @ ")]):t._e(),i("span",[t._v(t._s(t.author.company))])])]),t.user&&t.user.id!=t.author.id?i("div",{staticClass:"subscribe-button float-right",class:{true:t.followed,loading:t.following},on:{click:t.toggleFollow}}):t._e(),t.user&&t.user.id!=t.author.id?t._e():i("app-link",{staticClass:"to-user-button text-blue text-pointer float-right",attrs:{to:t.$userRoute(t.author),blank:!0}},[t._v("个人主页")])],1),i("section",{staticClass:"wallet-section"},[i("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/post/5893f4b7128fe10058d10042",expression:"'/post/5893f4b7128fe10058d10042'",modifiers:{blank:!0}}],staticClass:"text-blue title-text"},[t._v("即刻成为专栏作者！")]),i("div",{staticClass:"sub-text"},[t._v("掘金专栏上线已半年多，期间产出文章 1.4k 文章，共有 300+ 名专栏作者参与内测；现在，您也可以参与其中；联系微信 memindcn，将您的个人博客、您写过的优质文章，发送给我们，介绍一下你自己，即刻成为专栏作者！")])]),i("section",[i("div",{staticClass:"box-title"},[t._v("相关热门文章")]),i("ul",{staticClass:"recommend-entries-box"},t._l(t.state.relatedEntryList,function(t){return i("li",{staticClass:"item"},[i("related-entry",{staticClass:"related-entry",attrs:{entry:t}})],1)}))]),i("section",{staticClass:"comments-block"},[i("div",{staticClass:"box-title"},[t._v("评论")]),i("div",{staticClass:"comment-box"},[i("comment-form",{ref:"commentForm",staticClass:"comment-form",attrs:{id:"comment",user:t.user,entry:t.entry},on:{submited:t.onSubmitedComment}})],1),i("comment-list",{staticClass:"comment-list",attrs:{list:t.state.commentList.list,entry:t.entry},on:{"should-fetch-more":t.onShouldFetchMoreComment,replied:t.onRepliedComment}})],1)]),i("div",{staticClass:"weixin-bottom"},[i("img",{staticClass:"logo",attrs:{src:"https://gold-cdn.xitu.io/images/logo-white-background.svg"}}),i("div",{staticClass:"weixin-bottom-title"},[t._v("高质量的技术分享社区")]),i("div",{staticClass:"weixin-bottom-subtitle"},[t._v("开发者 · 设计师 · 产品经理")]),i("a",{attrs:{href:"http://a.app.qq.com/o/simple.jsp?pkgname=com.daimajia.gold",target:"_blank"}},[i("button",{staticClass:"weixin-bottom-download-button"},[t._v("立即下载")])])])])])},staticRenderFns:[]}},937:function(t,e){},938:function(t,e){}});