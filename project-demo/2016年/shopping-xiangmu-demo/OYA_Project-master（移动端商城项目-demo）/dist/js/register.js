$(function(){function o(){s(u),i=u.val();var o=!1,t=new XMLHttpRequest;t.onreadystatechange=function(){if(200==t.status&&4==t.readyState){var e=JSON.parse(t.responseText);e.forEach(function(t){t.phoneNum==i&&(o=!0)});var r=/^[1][358][0-9]{9}$/;""==i?(a[0]=!1,u.css("border-color","red"),u.next().html("这是必填字段").css("opacity","0.8")):r.test(i)?o?(a[0]=!1,u.css("border-color","red"),u.next().html("该账号已存在").css("opacity","0.8")):(a[0]=!0,u.next().html("").css("opacity","0"),u.css("border-color","greenyellow")):(a[0]=!1,u.css("border-color","red"),u.next().html("请正确填写您的手机号码").css("opacity","0.8"))}},t.open("GET","../json/personInfo.json",!0),t.send(null)}function t(){s(p);var o=p.val();""==o?(a[1]=!1,p.css("border-color","red"),p.next().html("这是必填字段").css("opacity","0.8")):"1234"!=o?(a[1]=!1,p.css("border-color","red"),p.next().html("验证码输入错误！").css("opacity","0.8")):(a[1]=!0,p.next().html("").css("opacity","0"),p.css("border-color","greenyellow"))}function e(){s(y),d=y.val();var o=/^[0-9a-zA-Z_#]{6,16}$/;""==d?(a[2]=!1,y.css("border-color","red"),y.next().html("这是必填字段").css("opacity","0.8")):o.test(d)?(a[2]=!0,y.next().html("").css("opacity","0"),y.css("border-color","greenyellow")):(a[2]=!1,y.css("border-color","red"),y.next().html("密码格式不正确！").css("opacity","0.8"))}function r(){s(f);var o=f.val();""==o?(a[3]=!1,f.css("border-color","red"),f.next().html("这是必填字段").css("opacity","0.8")):o!=d?(a[3]=!1,f.css("border-color","red"),f.next().html("确认密码失败").css("opacity","0.8")):o==d?(a[3]=!0,f.next().html("").css("opacity","0"),f.css("border-color","greenyellow")):(a[3]=!1,f.css("border-color","red"),f.next().html("输入格式有误").css("opacity","0.8"))}function n(){s(h);var o=h.val(),t=!1,e=new XMLHttpRequest;e.onreadystatechange=function(){if(200==e.status&&4==e.readyState){var r=JSON.parse(e.responseText);r.forEach(function(e){e.phoneNum==o&&(t=!0)});var n=/^[1][358][0-9]{9}$/;n.test(o)?t?(h.next().html("").css("opacity","0"),h.css("border-color","greenyellow")):h.next().html("该账号不存在").css("opacity","0.8"):h.next().html("请正确填写推荐人手机号码").css("opacity","0.8")}},e.open("GET","../json/personInfo.json",!0),e.send(null)}function s(o){o.val(o.val().replace(/ /g,""))}for(var c=!0,a=new Array(4),l=0;l<4;l++)a[l]=!1;var i,u=$(".phoneNum input").eq(1);u.on("blur",function(){o()});var p=$(".megInfo input").eq(0);p.on("blur",function(){t()});var d,y=$(".inputPsd input");y.on("blur",function(){e()});var f=$(".checkPsd input");f.on("blur",function(){r()});var h=$(".PhoneNum input").eq(1);h.on("blur",function(){n()}),$(".layout-center span").singleTap(function(){$(this).html("").css("opacity","0")}),$("form").submit(function(){if(0==a[0]?(o(),c=!1):c=!0,0==a[1]?(t(),c=!1):c=!0,0==a[2]?(c=!1,e()):c=!0,0==a[3]?(c=!1,r()):c=!0,0==c)return!1;var n=[{phoneNum:i,passWord:d}];localStorage.setItem("oyaUser",JSON.stringify(n))})});