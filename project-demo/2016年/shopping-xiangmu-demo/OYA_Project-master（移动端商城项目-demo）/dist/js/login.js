function checkPhoneNum(){clearSpace($phoneNum),account=$phoneNum.val();var e=!1,c=new XMLHttpRequest;c.onreadystatechange=function(){if(200==c.status&&4==c.readyState){var o=JSON.parse(c.responseText);o.forEach(function(c){c.phoneNum==account&&(e=!0,_psd=c.psd)});var r=/^[1][358][0-9]{9}$/;""==account?(arrCheck[0]=!1,$phoneNum.css("border-color","red"),$phoneNum.next().html("这是必填字段").css("opacity","0.8")):r.test(account)?null!=userInfo&&account==userInfo[0].phoneNum?(arrCheck[0]=!0,$phoneNum.next().html("").css("opacity","0"),$phoneNum.css("border-color","greenyellow")):e?e&&(arrCheck[0]=!0,$phoneNum.next().html("").css("opacity","0"),$phoneNum.css("border-color","greenyellow")):(arrCheck[0]=!1,$phoneNum.css("border-color","red"),$phoneNum.next().html("该账号不存在").css("opacity","0.8")):(arrCheck[0]=!1,$phoneNum.css("border-color","red"),$phoneNum.next().html("请正确填写您的手机号码").css("opacity","0.8"))}},c.open("GET","../json/personInfo.json",!0),c.send(null)}function checkPsd(){clearSpace($checkPsd),psd=$checkPsd.val(),""==psd?(arrCheck[1]=!1,$checkPsd.css("border-color","red"),$checkPsd.next().html("这是必填字段").css("opacity","0.8")):null!=userInfo?$phoneNum.val()==userInfo[0].phoneNum&&(psd==userInfo[0].passWord?(arrCheck[1]=!0,$checkPsd.next().html("").css("opacity","0"),$checkPsd.css("border-color","greenyellow")):(arrCheck[1]=!1,$checkPsd.css("border-color","red"),$checkPsd.next().html("密码不正确！").css("opacity","0.8"))):psd==_psd?(arrCheck[1]=!0,$checkPsd.next().html("").css("opacity","0"),$checkPsd.css("border-color","greenyellow")):(arrCheck[1]=!1,$checkPsd.css("border-color","red"),$checkPsd.next().html("密码不正确！").css("opacity","0.8"))}function clearSpace(e){e.val(e.val().replace(/ /g,""))}for(var allTrue=!0,arrCheck=new Array(2),i=0;i<2;i++)arrCheck[i]=!1;var $phoneNum=$(".phoneNum input").eq(1),account,$checkPsd=$(".psd input"),psd,_psd,userInfo=localStorage.getItem("oyaUser");null!=userInfo&&(userInfo=JSON.parse(userInfo),$phoneNum.val(userInfo[0].phoneNum)),$phoneNum.on("blur",function(){checkPhoneNum()}),$checkPsd.on("blur",function(){checkPsd()}),$(".layout-center span").singleTap(function(){$(this).html("").css("opacity","0")}),$("form").submit(function(){var e=localStorage.getItem("oyaUrl");if($(this).prop("action",e),0==arrCheck[0]?(checkPhoneNum(),allTrue=!1):allTrue=!0,0==arrCheck[1]?(checkPsd(),allTrue=!1):allTrue=!0,0==allTrue)return!1;var c=[{phoneNum:account,passWord:psd}];localStorage.setItem("oyaUser",JSON.stringify(c));var e=localStorage.getItem("oyaUrl");location.href=e});