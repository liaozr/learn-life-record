<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

<!---------------------------------------------------------------------------------------------------------------------------------->

去掉滚动条

<style>

.scroll-box ::-webkit-scrollbar{
    width: 0 !important;
    display: none;
    height: 0 !important;
    -webkit-appearance : none;
    background : transparent;
}

</style>

<!---------------------------------------------------------------------------------------------------------------------------------->

3. 微信开发者工具的设置

打开微信开发者工具->设置->安全->打开服务端口 / 设置->代理->使用系统代理

<!---------------------------------------------------------------------------------------------------------------------------------->


  小程序的发布都需要一个appid且需要在微信的开发平台上添加为开发者。


  开发环境下可以使用测试appid，在uniapp下可以不设置但发布时需要在 manifest.json 里设置 appid，


  需要注意的是如果你配置好了appid其它的人拿你的项目且不是开发者的情况下是启动不了的，


  但是可以通过 删除 manifest.json 里配置的id后再运行。

<!---------------------------------------------------------------------------------------------------------------------------------->


  域名类型

  小程序正式环境的接口一定得是 https 的，

  但我们在开发的时候可以在微信开发者工具->详情->本地设置->勾选 不校验合法域名、web-view（业务域名）......，这样就能正常访问接口了。

  （补充：正式环境的接口域名需要在微信小程序的平台上添加）

<!---------------------------------------------------------------------------------------------------------------------------------->


  小程序的发布：

  需要在 HBuilder 上点发行->选择小程序-微信 他会进行打包并让你填写项目名字和appid（如果已经填写过了则会自动填写上去），

  打包完成会重新打开一个新的小程序项目，在微信开发者工具上进行上传后在开发者平台进行提交审核或设置体验版。

  发布小程序  先是hbuilderx 发行小程序 再在 开发者工具上上传
  
  发布小程序 运行模式下不压缩代码且含有sourcemap，体积较大；若要正式发布，请点击发行菜单进行发布

<!---------------------------------------------------------------------------------------------------------------------------------->

  onTabItemTap：

  点击 tab 时触发，参数为Object，这个事件是在点击tabbar的时候才会触发的。

  tabbar加载完后再次进入是不会触发onLoad的可能会导致数据不会再次加载，这个时候我们可以借助这个事件去刷新页面，或者将数据的加载写在onShow里面。

<!---------------------------------------------------------------------------------------------------------------------------------->

  onShareAppMessage：

  用户点击右上角分享一般作为用户主动点击了按钮进行小程序的分享

<!---------------------------------------------------------------------------------------------------------------------------------->

getApp()

需要在app.vue里设置变量 globalData // globalData 示例对象仅为方便统一管

getApp().globalData.currentOrderTab = 1; // 设置变量

this.tabCurrentIndex = getApp().globalData.currentOrderTab; // 获取变量

<!---------------------------------------------------------------------------------------------------------------------------------->


  tabBar页面和普通页面

  1. tabbar

  1. 跳转至页面的方式以及传参:switchTab,不能

  2. onLoad的触发:第一次打开 仅触发一次 

  3. pages.json配置:pages /tabBar 都需要 

  4.左上角的返回:不带返回按钮
  

  2. 普通:

  1. 跳转至页面的方式以及传参：  navigateTo / redirectTo  可以传参

  2. onLoad的触发:每一次打开都会触发 

  3. pages.json配置:仅需要在pages配置

  4.左上角的返回: 带返回按钮

<!---------------------------------------------------------------------------------------------------------------------------------->

switchTab

跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。

需要跳转的 tabBar 页面的路径，路径后不能带参数

注：tabBar 页面需在 pages.json 的 tabBar 字段定义页面

跳转到tabbar页面是不会加载onLoad的，如果在跳转babbar的时候需要刷新页面可以进行如下操作：

跳转刷新页面：

<script>

  uni.switchTab({
    url: '/pages/order/order',
    success: (e) => {

      // pop() 方法用于删除数组的最后一个元素并返回删除的元素。
      
      let page = getCurrentPages().pop();
      if (page == undefined || page == null) return;
      page.onLoad();
    }
  });

</script>

<!---------------------------------------------------------------------------------------------------------------------------------->



  <script>

    // onLoad事件里面一般放的是进入页面要请求的数据
		onLoad(){
		  this.getNewsList()	
		}

    //  pages.json 配置文件

    // 这个文件里，页面的配置文件会覆盖全局的配置文件
    // 这个文件里面，字段都是要加双引号的，加了双引号后，才会有编码提示

    // hbuilderx这个编辑器，如果要想生成页面路由，或者页面组件的时候，直接点新建页面即可
    // 它会自动生成文件夹，且自动会在pages.json文件配置了页面路由，很是方便

  </script>

<!---------------------------------------------------------------------------------------------------------------------------------->

 实现 上拉加载 和 下拉刷新

 {
  "path" : "pages/goods/goods",
  "style" :                                                                                    
  {
      "navigationBarTitleText": "商品列表",
      "enablePullDownRefresh": true  // 开启下拉刷新
  } 
}

<!---------------------------------------------------------------------------------------------------------------------------------->
  
<!-- 调取手机拨打电话功能 -->
<!-- 调取手机拨打电话功能 -->

  phone() {
    uni.makePhoneCall({
      phoneNumber: '400-618-9090'
    })
  }	 

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->


map 地图插件

<map class="map" :longitude="longitude" :scale="scale" :latitude="latitude" :markers="markers"></map>

<script>

	export default {
		data() {
			return {
				longitude: 120.363172,
				latitude: 30.312212,
				scale: 13,
				markers:[
					{
						longitude: 120.363172,
						latitude: 30.312212,
						iconPath: '../../static/hmlogo.png',
						width: 30,
						height: 30
					}
				]
			}
		},
		methods: {
			phone() {
				uni.makePhoneCall({
					phoneNumber: '400-618-9090'
				})
			}	 
		}
	}

</script>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->
 

It's not allowed to load an initial chunk on demand. The chunk name "components/goodsList/goodsList" is already used by an entrypoint.

运行到微信小程序时，提示报错，报错原因是

当创建文件夹的时候 pages.json里面注册了这个组件的然而我们是不需要当一个页面的，例如公共组件，components下的文件是不需要出现在pages.json文件下的


<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

uni 实现区域滚动

scroll-view为纵向滚动组件 

scroll-y 表示可以纵向滚动

<scroll-view class="left" scroll-y>

  <view @click="changeItem(item,index)" class="list" :class="{'active':curIndex == index}" v-for="(item,index) in list">
     {{item.title}}
  </view>	

</scroll-view>


<style>
  /* App.vue 增加如下样式可以去除 scroll-view 组件的滚动条（不支持nvue页面） */
	::-webkit-scrollbar {  
	    display: none;  
	    width: 0 !important;  
	    height: 0 !important;  
	    -webkit-appearance: none;  
	    background: transparent;  
	}
</style>


<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->
   
  实现图片的放大预览

  <script>

      preview(currentUrl){

        let urlArr = this.datalist.map((item) =>{
          return item.url 
        })

        uni.previewImage({
          urls:urlArr,  // 要预览的图片集合
          current:currentUrl // 当前要预览的图片

        })

      }

  </script>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

导航跳转

<script>
  methods: {
    goDetail () {
        // 普通的跳转页面
        uni.navigateTo({
            url: '/pages/detail/detail?id=80&age=19'
        })
    },
    goMessage () {
        // 跳转到tabBar页面
        uni.switchTab({
            url: '/pages/message/message'
        })
    },
    toDetail(item){
			  let id = item.id
			  uni.navigateTo({
			  	url:`/pages/news-detail/news-detail?id=${id}`
			  })
		},
  },
  // 下一个页面接收参数
  onLoad(option){
		let id = option.id
		this.getNewsDetail(id)
	}

</script>    

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

rich-text 组件 渲染的是含有 html 标签的内容，

常用于解析新闻或者商品详情页面的详情内容。类似与 vue 中的 v-html

<view class="content news-detail-content">

  <rich-text :nodes="detail.contentDetails"></rich-text>

</view>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

<script>
  if(process.env.NODE_ENV === 'development'){
      console.log('开发环境')
  }else{
      console.log('生产环境')
  }
</script>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

运行期判断 运行期判断是指代码已经打入包中，仍然需要在运行期判断平台，

此时可使用 uni.getSystemInfoSync().platform 判断客户端环境是 Android、iOS 还是小程序开发工具

<script>

  switch(uni.getSystemInfoSync().platform){
    case 'android':
        console.log('运行Android上')
        break;
    case 'ios':
        console.log('运行iOS上')
        break;
    default:
        console.log('运行在开发者工具上')
        break;
  }

</script>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->


介绍: 【App 平台】点击返回键后移除 loading，防止某个页面出错按返回键后还有 loading

<script>
  // #ifdef APP-VUE

  onBackPress() {

    uni.hideLoading()
  }

  // #endif     ----结束条件编译

</script>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->

去掉滚动条

<style>

.scroll-box ::-webkit-scrollbar{
    width: 0 !important;
    display: none;
    height: 0 !important;
    -webkit-appearance : none;
    background : transparent;
}

</style>

<!---------------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------------->




</body>

</html>